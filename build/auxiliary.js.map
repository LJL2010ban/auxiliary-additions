{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 0eb64f86c103ff00e8a4","webpack:///./src/index.js","webpack:///./src/util/url.js","webpack:///./src/util/sheet.js","webpack:///./src/util/isNativeFunction.js","webpack:///./src/store/cookie.js","webpack:///./src/upload/AjaxForm.js","webpack:///./src/util/uniqueId.js","webpack:///./src/upload/UploadFile.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACdA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa,SAAS;AACtB,cAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ,UAAU;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA,cAAa,SAAS;AACtB,cAAa,SAAS;AACtB,cAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA,cAAa,SAAS;AACtB,cAAa,SAAS;AACtB,cAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA,cAAa,SAAS;AACtB,cAAa,SAAS;AACtB;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA,cAAa,OAAO;AACpB,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ,UAAU;AAClB;AACA;AACA;AACA,wDAAuD,oBAAoB;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC3HA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AChBA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA,aAAY,OAAO;AACnB,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;;;;;;;AC1BA;AACA;AACA;;AAEA;;AAEA,qCAAoC;;AAEpC;AACA;AACA;AACA,SAAQ,sBAAsB;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,QAAO;;AAEP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kBAAiB;AACjB;AACA;AACA,QAAO;;AAEP;AACA;AACA;AACA,QAAO;AACP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,iCAAgC;AAChC,iCAAgC;AAChC,iCAAgC;AAChC,+BAA8B;AAC9B;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,6DAA4D;AAC5D,+BAA8B,EAAE;AAChC;;AAEA,WAAU,oBAAoB;AAC9B;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW;AACX;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;;AAEA;;AAEA;AACA;;;;;;;AChIA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wFAAuF;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ,IAAG;AACH;AACA;AACA,GAAE;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;AC/FA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;ACPA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"auxiliary.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Auxiliary\"] = factory();\n\telse\n\t\troot[\"Auxiliary\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 0eb64f86c103ff00e8a4\n **/","var url = require('./util/url');\nvar sheet = require('./util/sheet');\nvar isNativeFunction = require('./util/isNativeFunction');\nvar cookie = require('./store/cookie');\nvar AjaxForm = require('./upload/AjaxForm');\nvar UploadFile = require('./upload/UploadFile');\n\nmodule.exports = {\n    'url':url,\n    'sheet':sheet,\n    'isNativeFunction':isNativeFunction,\n    'cookie':cookie,\n    'AjaxForm':AjaxForm,\n    'UploadFile':UploadFile\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/index.js\n ** module id = 0\n ** module chunks = 0\n **/","/**\n * @time 2012年10月26日\n * @author icepy\n * @info 完成处理URL字符串\n *\n */\n\n'use strict';\nvar urlString = [];\nvar location = window.location;\n\nmodule.exports = {\n\t/**\n\t * [parse 处理一个字符串URL]\n\t * @param  {[String]} url [传入一个字符串url]\n\t * @return {[Object]}     [返回一个object对象]\n\t */\n\tparse: function(url) {\n\t\tvar temp = document.createElement('a');\n\t\ttemp.href = url;\n\t\tvar result = {\n\t\t\t\"port\": temp.port,\n\t\t\t\"protocol\": temp.protocol.replace(':', ''),\n\t\t\t\"hash\": temp.hash.replace('#', ''),\n\t\t\t\"host\": temp.host,\n\t\t\t\"href\": temp.href,\n\t\t\t\"hostname\": temp.hostname,\n\t\t\t\"pathname\": temp.pathname,\n\t\t\t\"search\": temp.search,\n\t\t\t\"query\": {}\n\t\t};\n\t\tvar seg = result.search.replace(/^\\?/, '').split('&'),\n\t\t\tleng = seg.length,\n\t\t\ti = 0,\n\t\t\ttarget;\n\t\tfor (; i < leng; i++) {\n\t\t\tif (!seg[i]) continue;\n\t\t\ttarget = seg[i].split('=');\n\t\t\tresult.query[target[0]] = target[1];\n\t\t}\n\t\ttemp = null;\n\t\treturn result;\n\t},\n\t/**\n\t * [format 拼接一个完整的url字符串]\n\t * @param  {[String]} url [URL]\n\t * @param  {[Object]} obj [需要拼接的query或者hash参数]\n\t * @return {[String]}     [返回一个完整的URL字符串]\n\t */\n\tformat: function(url, obj) {\n\t\tvar i = 0,\n\t\t\tquery = obj.query,\n\t\t\thash = obj.hash;\n\t\turlString.length = 0;\n\t\turlString.push(url.lastIndexOf('?') > -1 ? url : url + '?');\n\t\tif (query) {\n\t\t\tfor (var key in query) {\n\t\t\t\tvar val = query[key]\n\t\t\t\tif (!i) {\n\t\t\t\t\ti++;\n\t\t\t\t\turlString.push(key + '=' + val)\n\t\t\t\t} else {\n\t\t\t\t\turlString.push('&' + key + '=' + val);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tif (hash) {\n\t\t\turlString.push(hash.indexOf('#') > -1 ? hash : '#' + hash);\n\t\t};\n\t\treturn urlString.join('');\n\t},\n\t/**\n\t * [resolve 将参数 to 位置的字符解析到一个绝对路径里]\n\t * @param  {[String]} from [源路径]\n\t * @param  {[String]} to   [将被解析到绝对路径的字符串]\n\t * @return {[String]}      [返回一个绝对路径字符串]\n\t */\n\tresolve: function(from, to) {\n\t\t/**\n\t\t *  路径描述 ./当前路径 ../父路径\n\t\t */\n\t\tif (/^(.\\/)/.test(to)) {\n\t\t\tto = to.replace(/^(.\\/)/, '/');\n\t\t};\n\n\t\tif (/^(..\\/)/.test(to)) {\n\t\t\tfrom = from.substr(0, from.lastIndexOf('/'));\n\t\t\tto = to.replace(/^(..\\/)/, '/');\n\t\t};\n\t\treturn from + to;\n\t},\n\t/**\n\t * [extname 返回指定文件名的扩展名称]\n\t * @param  {[String]} p [description]\n\t * @return {[String]}   [description]\n\t */\n\textname: function(p) {\n\t\tvar _p = p.split('.');\n\t\treturn _p[_p.length - 1] || '';\n\t},\n\t/**\n\t * [parseSearch 将search参数转换为obj]\n\t * @param  {[type]} query [description]\n\t * @return {[type]}       [description]\n\t */\n\tparseSearch:function(query){\n\t\tvar _query = {};\n\t\tvar seg = query.replace(/^\\?/, '').split('&'),\n\t\t\tleng = seg.length,\n\t\t\ti = 0,\n\t\t\tvalue,\n\t\t\ttarget;\n\t\tfor (; i < leng; i++) {\n\t\t\tif (!seg[i]) continue;\n\t\t\ttarget = seg[i].split('=');\n\t\t\tvalue = target[1];\n\t\t\tif ((/^\\[/.test(value) && /\\]$/.test(value)) || (/^{/.test(value) || /\\}$/.test(value))) {\n\t\t\t\tvalue = JSON.parse(value);\n\t\t\t};\n\t\t\t_query[target[0]] = value;\n\t\t}\n\t\treturn _query;\n\t}\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/util/url.js\n ** module id = 1\n ** module chunks = 0\n **/","/**\n * @time 2012年9月26日\n * @author icepy\n * @info 新建一个style.sheet对象，来标注新的css规则等\n */\n\n'use strict';\n\nmodule.exports = sheet();\n\nfunction sheet() {\n  // 使用style.sheet.insertRule()\n  var style = document.createElement('style');\n  style.appendChild(document.createTextNode(''));\n  document.head.appendChild(style);\n  return style.sheet;\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/util/sheet.js\n ** module id = 2\n ** module chunks = 0\n **/","/**\n * @time 2012年9月27日\n * @author icepy\n * @info 判断是否是原生函数\n */\n\n'use strict';\n\nmodule.exports = isNativeFunction;\n\nvar toString = Object.prototype.toString;\nvar funToString = Function.prototype.toString;\nvar reConstructor= /^\\[object .+?Constructor\\]$/;\nvar reNative = RegExp('^' +\n  String(toString)\n  .replace(/[.*+?^${}()|[\\]\\/\\\\]/g, '\\\\$&')\n  .replace(/toString|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n/**\n * [判断一个值或者对象是否为原生函数或对象]\n * @param  {[type]} value [description]\n * @return {[type]}       [description]\n */\nfunction isNativeFunction(value) {\n  var type = typeof value;\n  return type === 'function' ? reNative.test(funToString.call(value)) : (value && type === 'object' && reConstructor.test(toString.call(value))) || false;\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/util/isNativeFunction.js\n ** module id = 3\n ** module chunks = 0\n **/","/*\n    引用`https://github.com/js-cookie/js-cookie` 2.1.0\n */\n\n'use strict';\n\nmodule.exports = init(function () {});\n\nfunction extend () {\n  var i = 0;\n  var result = {};\n  for (; i < arguments.length; i++) {\n    var attributes = arguments[ i ];\n    for (var key in attributes) {\n      result[key] = attributes[key];\n    }\n  }\n  return result;\n}\n\nfunction init (converter) {\n  function api (key, value, attributes) {\n    var result;\n\n    // Write\n\n    if (arguments.length > 1) {\n      attributes = extend({\n        path: '/'\n      }, api.defaults, attributes);\n\n      if (typeof attributes.expires === 'number') {\n        var expires = new Date();\n        expires.setMilliseconds(expires.getMilliseconds() + attributes.expires * 864e+5);\n        attributes.expires = expires;\n      }\n\n      try {\n        result = JSON.stringify(value);\n        if (/^[\\{\\[]/.test(result)) {\n          value = result;\n        }\n      } catch (e) {}\n\n      if (!converter.write) {\n        value = encodeURIComponent(String(value))\n          .replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n      } else {\n        value = converter.write(value, key);\n      }\n\n      key = encodeURIComponent(String(key));\n      key = key.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent);\n      key = key.replace(/[\\(\\)]/g, escape);\n\n      return (document.cookie = [\n        key, '=', value,\n        attributes.expires && '; expires=' + attributes.expires.toUTCString(), // use expires attribute, max-age is not supported by IE\n        attributes.path    && '; path=' + attributes.path,\n        attributes.domain  && '; domain=' + attributes.domain,\n        attributes.secure ? '; secure' : ''\n      ].join(''));\n    }\n\n    // Read\n\n    if (!key) {\n      result = {};\n    }\n\n    // To prevent the for loop in the first place assign an empty array\n    // in case there are no cookies at all. Also prevents odd result when\n    // calling \"get()\"\n    var cookies = document.cookie ? document.cookie.split('; ') : [];\n    var rdecode = /(%[0-9A-Z]{2})+/g;\n    var i = 0;\n\n    for (; i < cookies.length; i++) {\n      var parts = cookies[i].split('=');\n      var name = parts[0].replace(rdecode, decodeURIComponent);\n      var cookie = parts.slice(1).join('=');\n\n      if (cookie.charAt(0) === '\"') {\n        cookie = cookie.slice(1, -1);\n      }\n\n      try {\n        cookie = converter.read ?\n          converter.read(cookie, name) : converter(cookie, name) ||\n          cookie.replace(rdecode, decodeURIComponent);\n\n        if (this.json) {\n          try {\n            cookie = JSON.parse(cookie);\n          } catch (e) {}\n        }\n\n        if (key === name) {\n          result = cookie;\n          break;\n        }\n\n        if (!key) {\n          result[name] = cookie;\n        }\n      } catch (e) {}\n    }\n\n    return result;\n  }\n\n  api.get = api.set = api;\n  api.getJSON = function () {\n    return api.apply({\n      json: true\n    }, [].slice.call(arguments));\n  };\n  api.defaults = {};\n\n  api.remove = function (key, attributes) {\n    api(key, '', extend(attributes, {\n      expires: -1\n    }));\n  };\n\n  api.withConverter = init;\n\n  return api;\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/store/cookie.js\n ** module id = 4\n ** module chunks = 0\n **/","/**\r\n * @time 2016年3月3日\r\n * @author  icepy\r\n * @info  跨域模拟Ajax的Form表单\r\n */\r\n\r\n'use strict';\r\n\r\nvar url = require('../util/url');\r\nvar uniqueId = require('../util/uniqueId');\r\n\r\nvar AjaxForm = function(options){\r\n\toptions = options || {};\r\n\tthis.$el = typeof options.el === 'string' ? $(options.el) : options.el;\r\n\tthis.uid = uniqueId('AjaxForm-');\r\n\tthis.loadState = false;\r\n\tthis._init();\r\n};\r\n\r\nAjaxForm.prototype._init = function(){\r\n\tvar defer = $.Deferred();\r\n\t$.extend(this,defer.promise());\r\n\tthis._createIframe();\r\n\tthis._addEvent(defer);\r\n};\r\n\r\nAjaxForm.prototype._createIframe = function(){\r\n\tvar iframeHTML = '<iframe id=\"'+this.uid+'\" name=\"'+this.uid+'\"  style=\"display: none;\" src=\"about:blank\"></iframe>';\r\n\tthis.$el.attr('target',this.uid);\r\n\tthis.$el.append(iframeHTML);\r\n\tthis._iframe = $('#'+this.uid);\r\n\t$('<input />').attr({\r\n\t\ttype : 'hidden',\r\n\t\tname : 'cross_post',\r\n\t\tvalue : '1'\r\n\t}).appendTo(this.$el);\r\n};\r\n\r\nAjaxForm.prototype._addEvent = function(promise){\r\n\tvar self = this;\r\n\tthis._iframe.on('load',function(){\r\n\t\tif (self.loadState) {\r\n\t\t\tvar cw = this.contentWindow;\r\n\t\t\tvar loc = cw.location;\r\n\t\t\tif (loc.href === 'about:blank') {\r\n\t\t\t\tpromise.reject(cw);\r\n\t\t\t}else{\r\n\t\t\t\ttry {//如果后台没有作跨域处理，则需手动触发onComplete\r\n\t\t\t\t\tvar body = this._iframe[0].contentWindow.document.body;\r\n\t\t\t\t\tinnerText = body.innerText;\r\n\t\t\t\t\tif (!innerText) {\r\n\t\t\t\t\t\tinnerText = body.innerHTML;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (innerText) {\r\n\t\t\t\t\t\tpromise.resolve($.parseJSON(innerText));\r\n\t\t\t\t\t};\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tpromise.resolve(cw);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tself.loadState = false;\r\n\t\t};\r\n\t});\r\n};\r\n\r\nAjaxForm.prototype.encrypto = function(secret){\r\n\tvar self = this;\r\n\t$.each(secret, function(key, value) {\r\n\t\tvar $item = self.$el.find('[name=' + key + ']');\r\n\t\tif ($item.length === 0) {\r\n\t\t\t$('<input />').attr({\r\n\t\t\t\ttype : 'hidden',\r\n\t\t\t\tname : key,\r\n\t\t\t\tvalue : value\r\n\t\t\t}).appendTo(self.$el);\r\n\t\t} else {\r\n\t\t\t$item.val(value);\r\n\t\t}\r\n\t});\r\n};\r\n\r\nvar shared = null;\r\nAjaxForm.sharedInstanceAjaxForm = function(element,options){\r\n\tif (!shared) {\r\n\t\toptions = options || {};\r\n\t\toptions.el = element;\r\n\t\tshared = new AjaxForm(options);\r\n\t}\r\n\treturn shared;\r\n};\r\nAjaxForm.classInstanceAjaxForm = function(element,options){\r\n\toptions = options || {};\r\n\toptions.el = element;\r\n\treturn new AjaxForm(options);\r\n};\r\n\r\nmodule.exports = AjaxForm;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/upload/AjaxForm.js\n ** module id = 5\n ** module chunks = 0\n **/","\nmodule.exports = uniqueId;\n\nvar idCounter = 0;\nfunction uniqueId(prefix) {\n  var id = ++idCounter + '';\n  return prefix ? prefix + id : id;\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/util/uniqueId.js\n ** module id = 6\n ** module chunks = 0\n **/","/**\r\n * @time 2016年3月3日\r\n * @author  icepy\r\n * @info  跨域上传图片，只支持iframe的方式\r\n */\r\n\r\n'use strict';\r\n\r\nvar url = require('../util/url');\r\nvar AjaxForm = require('./AjaxForm');\r\nvar uniqueId = require('../util/uniqueId');\r\n\r\nvar UploadFile = function(options){\r\n\tvar self = this;\r\n\tthis.$el = typeof options.el === 'string' ? $(options.el) : options.el;\r\n\tthis.uid = uniqueId('UploadFile-');\r\n\tthis.options = options;\r\n\tthis._data = options.data || {};\r\n\tthis._filename = options.filename || 'image';\r\n\tthis._url = options.url;\r\n\tif (!this._url) {\r\n\t\tconsole.warn('配置上传URL');\r\n\t\treturn;\r\n\t};\r\n\tthis._init();\r\n\tvar defer = $.Deferred();\r\n\t$.extend(this,defer.promise());\r\n\tthis.ajaxForm = AjaxForm.classInstanceAjaxForm(this.$el,{\r\n\t\ttype:'img'\r\n\t});\r\n\tthis.ajaxForm.done(function(cw){\r\n\t\tvar loc = cw.location;\r\n\t\tvar search = decodeURIComponent(loc.search);\r\n\t\tvar query = url.parseSearch(search);\r\n\t\tdefer.resolve(query);\r\n\t});\r\n\tthis.ajaxForm.fail(function(){\r\n\t\tdefer.reject(this);\r\n\t});\r\n};\r\n\r\nUploadFile.prototype._init = function(){\r\n\tthis._createElement();\r\n};\r\n\r\nUploadFile.prototype._createElement = function(){\r\n\tvar inputs = '';\r\n\tfor(var name in this._data){\r\n\t\tvar value = this._data[name];\r\n\t\tvar type = Object.prototype.toString.call(value);\r\n\t\tif (type === '[object Object]' || type === '[object Array]') {\r\n\t\t\tvalue = JSON.stringify(value);\r\n\t\t};\r\n\t\tinputs += '<input type=\"hidden\" name=\"'+name+'\" value=\\''+value+'\\'/>';\r\n\t};\r\n\tinputs += '<input type=\"file\" class=\"opacity0 upload-file '+this.options.className+'\" name=\"'+this._filename+'\"  />';\r\n\tthis.$el.attr('method','POST');\r\n\tthis.$el.attr('action',this._url);\r\n\tthis.$el.attr('enctype','multipart/form-data');\r\n\tthis.$el.append(inputs);\r\n};\r\n\r\n//错误码消息映射\r\nUploadFile.prototype.parseErrorMsg = function(res){\r\n\tif(res && res.state == 'SUCCESS'){\r\n\t\treturn true;\r\n\t}\r\n\tvar code = res.errCode *1 || 0;\r\n\tswitch(code){\r\n\t\tcase 29:\r\n\t\t\treturn '上传的文件太大了,请重新上传';\r\n\t\tcase 31:\r\n\t\t\treturn '请上传JPGE,JPG,PNG,GIF等格式的图片文件';\r\n\t}\r\n\treturn '文件上传失败,请重新上传';\r\n};\r\n\r\n/**\r\n * [submit 提交文件]\r\n * @return {[type]} [description]\r\n */\r\nUploadFile.prototype.submit = function(){\r\n\tthis.ajaxForm.loadState = true;\r\n\tif (typeof this._before === 'function' ) {\r\n\t\tthis._before();\r\n\t};\r\n\tthis.$el.submit();\r\n};\r\n\r\nvar shared = null;\r\nUploadFile.sharedInstanceUploadFile = function(options){\r\n\tif (!shared) {\r\n\t\tshared = new UploadFile(options);\r\n\t}\r\n\treturn shared;\r\n};\r\nUploadFile.classInstanceUploadFile = function(options){\r\n\treturn new UploadFile(options);\r\n};\r\n\r\nmodule.exports = UploadFile;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/upload/UploadFile.js\n ** module id = 7\n ** module chunks = 0\n **/"],"sourceRoot":""}